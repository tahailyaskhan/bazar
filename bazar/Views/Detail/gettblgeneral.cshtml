@model IEnumerable<bazar.DAL.Data.tblgeneralclass>

@{
    ViewBag.Title = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
    // Layout = null;
}

@*<script src="~/Sscripts/jquery-3.6.0.min.js"></script>

    <script src="~/Content/Toaster/scripts/toastr.min.js"></script>
    <link href="~/Content/Toaster/content/toastr.min.css" rel="stylesheet" />
    <link href="~/Content/JqueryDatatable/CSS/dataTables.bootstrap.min.css" rel="stylesheet" />
    <script src="~/Sscripts/moment.js"></script>
    <script src="~/Sscripts/CustomeJS.js"></script>

    <script src="~/Sscripts/CustomeJS.js"></script>*@

<script src="~/Sscripts/jquery-3.6.0.min.js"></script>
<script src="~/Sscripts/jquery.dataTables.min.js"></script>
<script src="~/Content/Toaster/scripts/toastr.min.js"></script>
<link href="~/Content/Toaster/content/toastr.min.css" rel="stylesheet" />
<link href="~/Content/JqueryDatatable/CSS/dataTables.bootstrap.min.css" rel="stylesheet" />
<script src="~/Sscripts/moment.js"></script>
@*<script src="~/Sscripts/CustomeJS.js"></script>*@

<script src="~/Sscripts/CustomeJS.js"></script>

<section class="pcoded-main-container">
    <div class="pcoded-wrapper">
        <div class="pcoded-content">
            <div class="pcoded-inner-content">
                <div class="main-body">
                    <div class="page-wrapper">
                        <!-- [ breadcrumb ] start -->
                        @*<div class="page-header">
                            <div class="page-block">
                                <div class="row align-items-center">
                                    <div class="col-md-12">
                                        <div class="page-header-title">
                                            <h5 class="m-b-10">Bootstrap Basic Tables</h5>
                                        </div>
                                        <ul class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="index.html"><i class="feather icon-home"></i></a></li>
                                            <li class="breadcrumb-item"><a href="#!">Bootstrap Table</a></li>
                                            <li class="breadcrumb-item"><a href="#!">Basic Tables</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>*@
                        <!-- [ breadcrumb ] end -->
                        <!-- [ Main Content ] start -->
                        <div class="row">
                            <!-- [ basic-table ] start -->
                            <div class="col-sm-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h3>Product Details</h3>
                                       
                                    </div>
                                    <div class="card-body table-border-style">
                                        <div class="table-responsive">

                                            <table id="tblshoe" class="table" style="width:100%">
                                                <thead style="color:#ff6002">
                                                    <tr>
                                                        <th style="display: none">id</th>
                                                        <th>Product Name</th>

                                                       
                                                        <th>price</th>
                                                        <th style="display:none">detail</th>
                                                        <th style="display:none">pic22</th>
                                                        <th style="display:none">pic11</th>
                                                        <th style="display:none">pic33</th>
                                                        <th>pic1</th>
                                                        <th>pic2</th>
                                                        <th>pic3</th>
                                                        <th>Edit</th>

                                                    </tr>
                                                </thead>
                                                <tbody id="tblfloortime">

                                                    @foreach (var row in Model)
                                                    {

                                                        <tr>
                                                            <td style="display:none">@Html.DisplayFor(modelItem => row.id)</td>
                                                            <td>@Html.DisplayFor(modelItem => row.productname)</td>


                                                           
                                                            <td>@Html.DisplayFor(modelItem => row.price)</td>
                                                            <td style="display:none">@Html.DisplayFor(modelItem => row.detail)</td>
                                                            <td style="display:none">@Html.DisplayFor(modelItem => row.pic11)</td>
                                                            <td style="display:none">@Html.DisplayFor(modelItem => row.pic22)</td>
                                                            <td style="display:none">@Html.DisplayFor(modelItem => row.pic33)</td>
                                                            <td><img id="myImg1" src="@row.pic11" alt="Snow" style="width:100px;height:100px;" class="mb-2"></td>
                                                            <td><img id="myImg2" src="@row.pic22" alt="Snow" style="width:100px;height:100px;" class="mb-2"></td>
                                                            <td><img id="myImg3" src="@row.pic33" alt="Snow" style="width:100px;height:100px;" class="mb-2"></td>
                                                            <td><button class='mt-2 btn btn-primary btnEdit' id='btnEdit'>Edit</button>  @Html.ActionLink("Delete", "deletetblgeneral", "Delete", new { id = row.id }, new { @class = "btn btn-primary", style = "margin-top:10px" })</td>
                                                            @*<td><button class='mt-2 btn btn-primary btnDelete' id='btnDelete'>Deactivate</button></td>*@
                                                            @*<td>@Html.ActionLink("Delete", "deletetblsizeShirtMale", "Delete", new { id = row.id }, new { @class = "btn btn-primary" })</td>*@


                                                        </tr>

                                                    }

                                                    @*<tr>
                                                            <td>@Html.ActionLink("Delete", "deletetblsizeShirtMale", "Delete", new { chartname = rows.chartname }, new { @class = "btn btn-primary" })</td>

                                                        </tr>*@

                                                </tbody>
                                            </table>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- [ basic-table ] end -->


                        </div>
                        <!-- [ Main Content ] end -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div id="my-modal" class="modal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header" style="background-color:blue">
                <h2 style="color:white">Edit Form</h2>
                <span id="close" class="close">&times;</span>

            </div>
            <div class="modal-body">
                <div id="modaldata" style="margin-top:20px; margin-bottom:30px;">  </div>
                <h5 id="modelcontent2" style=" font-family:Calibri !important; "></h5>
                <div id="modelcontent" style="margin-bottom:30px;  font-family:Calibri !important; ">
                    <form id="data" enctype="multipart/form-data" method="post">


                        <div class="form-group" style="display:none">
                            <label for="id">Id</label>
                            <input type="text" style="display:none" class="form-control" name="id" id="ids" placeholder="Enter waist size">
                        </div>
                        <div class="form-group">
                            <label for="shoename">productname</label>
                            <input type="text" class="form-control" name="productname" id="productname" placeholder="Enter productname">
                        </div>



                        

                        


                        <div class="form-group">
                            <img src="" id="pic1"
                                 class="rounded-square"
                                 height="50" width="75"
                                 style="border:1px" />
                            <input type="file" id="pics1" name="pic1">

                        </div>



                        <div class="form-group">
                            <img src="" id="pic2"
                                 class="rounded-square"
                                 height="50" width="75"
                                 style="border:1px" />
                            <input type="file" id="pics2" name="pic2">
                        </div>

                        <div class="form-group">
                            <img src="" id="pic3"
                                 class="rounded-square"
                                 height="50" width="75"
                                 style="border:1px" />
                            <input type="file" id="pics3" name="pic3">
                        </div>

                        <div class="form-group">
                            <label for="price">Price</label>
                            <input type="text" class="form-control" name="price" id="price" placeholder="Enter Price">
                        </div>



                        <div class="form-group">
                            <div class="form-group">
                                <label for="detail">Detail</label>
                                <textarea class="form-control" name="detail" id="detail" rows="3"></textarea>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary">Submit</button> <button type="button" id="cancel" class="btn btn-danger">Cancel</button>
                    </form>
                </div>
            </div>
            <div class="modal-footer" style="background-color:blue">

            </div>
        </div>
    </div>

</div>



<script>
          function CheckNull() {
        debugger
              if ($("#productname").val() == "") { document.getElementById('productname').style.borderColor = "red"; toastr.error('productname  required!'); } else { document.getElementById('productname').style.borderColor = "#ced4da"; }
        if ($("#price").val() == "") { document.getElementById('price').style.borderColor = "red"; toastr.error('price required!');  } else { document.getElementById('price').style.borderColor = "#ced4da"; }
        if ($("#detail").val() == "") { document.getElementById('detail').style.borderColor = "red"; toastr.error('detail required!'); } else { document.getElementById('detail').style.borderColor = "#ced4da"; }





        if($("#productname").val() == "" || $("#price").val() == "" || $("#detail").val() == ""  )
        {
            debugger
            toastr.error('All Fields are required!');
            checkingNull = false;
            return false;
        }
        else {
            checkingNull = true;
            return true;
        }
    }
    $("form#data").submit(function (e) {
        debugger
       
        var ch = CheckNull();
        if (ch == false) {
            return false;
        }

        var formData = new FormData(this);


            //alert(email+mobile+cnic);
            $.ajax({
                url: '@Url.Action("updatetblgeneral", "Update")',
                type: 'POST',
                data: formData,
                success: function (data) {
                    toastr.success('Successfully Submitted');
                },
                cache: false,
                contentType: false,
                processData: false
            });



    });


   

     $(document).on('click', '.btnEdit', function () {
         $('#my-modal').fadeIn(400);


            var $row = $(this).closest("tr"),
            $tds = $row.find("td:nth-child(1)");
             $('#ids').val($tds.text());



            //$tds = $row.find("td:nth-child(6)");
            //checklistId = $tds.text();

            $tds = $row.find("td:nth-child(2)");
            $('#productname').val($tds.text());
            //AreaName = $('#txtCategoryName').val();

            $tds = $row.find("td:nth-child(3)");
            $("#price").val($tds.text());


        
       

         $tds = $row.find("td:nth-child(4)");
         $('#detail').val($tds.text());

         $tds = $row.find("td:nth-child(5)");
         $("#pic1").attr("src", $tds.text());

         $tds = $row.find("td:nth-child(6)");
         $("#pic2").attr("src", $tds.text());

         $tds = $row.find("td:nth-child(7)");
         $("#pic3").attr("src", $tds.text());
     });

        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#pic1').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }
        }
        function readURL2(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#pic2').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }
    }
    function readURL3(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#pic3').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }

        $("#pics1").change(function () {
            readURL(this);
        });
        $("#pics2").change(function () {
            readURL2(this);

        });

    $("#pics3").change(function () {
        readURL3(this);
    });
      $(document).on('click', '#btnView', function () {


            $('#my-modal').fadeIn(400);

            var $row = $(this).closest("tr"),
            $tds = $row.find("td:nth-child(1)");
            id = $tds.text();
            $tds = $row.find("td:nth-child(2)");


            $.ajax({
                url: '@Url.Action("edittblmaleGarment", "Edit")',
                type: 'POST',
                data: {
                    'id': id
                },

                dataType: 'json',

                success: function (response) {


                    var res = response.data;
                    var len = res.length;

                    if (len != 0) {
                        $("#modelcontent1").html($tds.text());
                        $("#modaldata").show();
                        $("#modelcontent2").hide();
                        for (i = 0; i < len; i++) {

                            $('#modelcontent').append('<h6 style=" ">' + '<i class="fas fa-check" style=" color:#ff6002">' + '</i>' + '    ' + ' ' + ' ' + '<span style=" margin-left:10px; font-family:Calibri !important;  font-size:20px;"> ' + res[i].Name + '</span>' + '</h6>');
                        }
                    }
                    else {
                        $("#modelcontent2").html("Checklist is not assigned to this role");
                        $("#modelcontent2").show();
                        $("#modaldata").hide();
                    }
                },
                error: function (request, error) {
                    toastr.error('Oops! Something went wrong');
                }
            });
        })


    function getCategories() {

        debugger
        $.ajax({
            url: '@Url.Action("getCategories", "Detail")',
            type: 'POST',
            data: {
            },
            dataType: 'json',
            success: function (data) {
                debugger
                alert
                console.log(data.CategoryTypes);
                $('#categoryid').empty();

                var s = ' <option value="0">-- Please Select --</option>';

                $.each(data.CategoryTypes, function (data, value) {
                    //$("#ddlAttributeType").append('<option value="' + value.ID + '">' + value.CategoryType1 + '</option>');
                    s += '<option value="' + value.id + '">' + value.categoryName + '</option>';
                });
                $("#categoryid").append(s);

            },
            error: function (request, error) {
                console.log(request);
            }
        });
    }


    

      


  

        $(document).on('click', '#close', function () {
            //$('#modelcontent').empty();
            //$("#modelcontent1").empty();
            $('#my-modal').fadeOut(400);

        });
        $(document).on('click', '#cancel', function () {
            //$('#modelcontent').empty();
            //$("#modelcontent1").empty();
            $('#my-modal').fadeOut(400);

        });

    $(document).ready(function () {

        let table = new DataTable('#tblshoe');



    });



</script>



<style>
    :root {
        --modal-duration: 1s;
        --modal-color: #ff6002;
    }


    .button {
        background: #428bca;
        padding: 1em 2em;
        color: #fff;
        border: 0;
        border-radius: 5px;
        cursor: pointer;
    }

        .button:hover {
            background: #3876ac;
        }

    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        height: 100%;
        width: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.5);
    }

    .modal-content {
        margin: 20% auto;
        width: 100%;
        box-shadow: 0 5px 8px 0 rgba(0, 0, 0, 0.2), 0 7px 20px 0 rgba(0, 0, 0, 0.17);
        animation-name: modalopen;
        animation-duration: var(--modal-duration);
    }

    .modal-header h2,
    .modal-footer h3 {
        margin: 0;
    }

    .modal-header {
        background: var(--modal-color);
        padding: 15px;
        color: #fff;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
    }

    .modal-body {
        padding: 10px 20px;
        background: #fff;
    }

    .modal-footer {
        background: var(--modal-color);
        padding: 10px;
        color: #fff;
        text-align: center;
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
    }

    .close {
        color: #ccc;
        float: right;
        font-size: 30px;
        color: #fff;
    }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
</style>
